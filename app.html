<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CryptoVision â€“ AI Crypto Insights</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#020617;
  color:#e5e7eb;
}
.container{
  max-width:900px;
  margin:40px auto;
  padding:20px;
}
h1{margin-bottom:10px}
button{
  padding:8px 14px;
  border-radius:6px;
  border:none;
  background:#22c55e;
  color:#020617;
  font-weight:700;
  cursor:pointer;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #1f2937;
}
th{text-align:left;color:#9ca3af}
.up{color:#22c55e}
.down{color:#f87171}
</style>
</head>

<body>
<div class="container">
  <h1>CryptoVision</h1>
  <button id="refreshBtn">Refresh</button>

  <table>
    <thead>
      <tr>
        <th>Coin</th>
        <th>Price (USD)</th>
        <th>Trend</th>
      </tr>
    </thead>
    <tbody id="coinsBody"></tbody>
  </table>
</div>

<script>
/* =========================
   CONFIG
========================= */
const BACKEND_BASE_URL = "https://cryptovision-ldo7.onrender.com";

/* =========================
   FETCH COINS (BACKEND)
========================= */
async function fetchCoins(){
  const url = `${BACKEND_BASE_URL}/coins/simple`;
  const body = document.getElementById("coinsBody");
  body.innerHTML = "<tr><td colspan='3'>Loadingâ€¦</td></tr>";

  try{
    const res = await fetch(url);
    if(!res.ok) throw new Error(res.status);
    const json = await res.json();

    /* ðŸ”´ AICI era problema TA */
    const coins = json.coins;

    body.innerHTML = "";

    coins.forEach(c=>{
      const tr = document.createElement("tr");

      const tdName = document.createElement("td");
      tdName.textContent = c.id;

      const tdPrice = document.createElement("td");
      tdPrice.textContent = "$" + c.price.toLocaleString();

      const tdTrend = document.createElement("td");
      tdTrend.textContent = c.trend;
      tdTrend.className =
        c.trend === "bullish" ? "up" :
        c.trend === "bearish" ? "down" : "";

      tr.appendChild(tdName);
      tr.appendChild(tdPrice);
      tr.appendChild(tdTrend);

      body.appendChild(tr);
    });

  }catch(err){
    body.innerHTML = `<tr><td colspan="3">Error loading backend</td></tr>`;
    console.error(err);
  }
}

/* =========================
   EVENTS
========================= */
document.getElementById("refreshBtn").onclick = fetchCoins;
fetchCoins();
</script>
</body>
</html>
